@if (gameContainer == null) {
	<h1>Loading...</h1>
}
else {
	<div class="game-container" style="@gameContainerCss" @onclick="HandleClick">
		<div class="rect border"></div>	
		<div class="middle border">
			<div class="square">
			</div>
			<div class="square2">
			</div>
		</div>
		<div class="line"></div>	
		<div class="rect border"></div>

		<Ball Model="gameContainer.Ball" IsRunning="gameContainer.IsRunning" />
		<Paddle Model="gameContainer.UserPaddle" />
		<Paddle Model="gameContainer.ComputerPaddle" />
	</div>
}

@code {
	GameManager? gameContainer { get; set; }

	string gameContainerCss => $"width: {gameContainer?.containerDimensions.x}px; height: {gameContainer?.containerDimensions.y}px";

	protected override void OnInitialized()
	{
		gameContainer = new GameManager();
		
		gameContainer.MainLoopCompleted += (o,e) => StateHasChanged();
	}

	void HandleClick() {
		if (gameContainer?.IsRunning == false)
			gameContainer.StartGame();
		else
			gameContainer?.StopGame();
	}
}